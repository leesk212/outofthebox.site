---
toc: True
Tags: network book-review
---
# 1. 네트워크 첫걸음

![img](https://user-images.githubusercontent.com/67637935/131210454-1b57f469-a386-4e84-a617-154f2926c4ad.png)
![img1 daumcdn](https://user-images.githubusercontent.com/67637935/131210455-7fdf7106-c5c3-448d-b996-6538296ccdff.jpg)

## 네트워크 구조
* 인터넷: 전 세계의 큰 네트워크부터 작은 네트워크까지 연결하는 거대한 네트워크를 의미한다.
* 패킷: 네트워크를 통해 전송되는 데이터의 작은 조각
  * 큰 데이터가 있더라도 작게 나누어서 보내는게 규칙
  * 큰 데이터를 그대로 보내게 되면 그 데이터가 네트워크의 *대역폭*을 많이 점유하게 되어서 다른 패킷의 흐름을 막게된다.
  * 작게 나눠서 보내지는 데이터들은 "순번"이 정해져서 보내진다. 그렇기에 패킷이 제각각 오게 되더라도 "순번"에 맞추어 기존의 형태로 "복원"할 수 있게 된다.

## 정보의 양을 나타내는 단위
* bit 최소의 단위, 8bit:1byte, 
* 0,1의 연속으로 이루어진 것이 잘려지게 되고(패킷 분할) 전송되어진다. (ASCII로 복원)
* 실제 네트워크는 "전기적 신호"로 전송된다.

## 랜가 웬
* 접속할 수 있는 범위에 따라 크게 두가지 종류로 나눌 수 있음
  * LAN(Local Area Network): 특정 건물 안이나 특정 지역을 범위로 하는 네트워크
    * 비교적 빠르고, 오류가 적음, 범위는 한정
  * WAN(Wide Area Network): 지리적으로 넓은 범위에 구축된 네트워크
    * ISP(Internet Service Provider)을 통해 멀리 있는 곳까지 네트워크를 연결할 수 있다.
    * 비교적 느리고, 오류가 많음, 범위는 넓음(LAN과 LAN을 연결)

## 가정에서 하는 랜 구성
* 랜을 구성하기 위해서는 다른 곳에서 네트워크(WAN)을 받아 올 수 있는 ISP가 필요하고, 인터넷 회선이 필요하다.
* Broadband router(인터넷 공유기): 인터넷 서비스 제공자와 네트워크를 연결하기 위한 장비
* 인터넷 공유기 중심으로 내부 인터넷망(사설망)을 구성하고, 다양한 기기를 연결할 수 있다. (사설네트워크 대역:192.168.0.xxx)
* 연결 방식은 "유선 랜", "무선 랜"으로 나눠지게 된다.

## 회사에서 하는 랜 구성
* **DMZ**의 차이가 존재한다.
  * DMZ(DeMilitarized Zone): 외부에 공개하기 위한 네트워크
  * 무엇을 외부에 공개하는가?!: 서버(웹서버, 메일 서버, DNS서버)등을 공개
    * 웹 사이트를 불특정 다수의 이용자에게공개하려면 웹서버를 외부에 공개해야하고, 외부 사용자와 메일을 주고받으려면 메일 서버를 외부에 공개하고, 외부에서 도메인 이름을 사용하여 회사의 서버에 접속하려면 DNS서버를 외부에 공개해야함
  * 인터넷인 외부 네트워크와 내부 네트워크 사이에 위치한 중간지대(서브넷)을 말한다.
  * 네트워크의 보안 영역으로 외부 공격자가 내부 네트워크에 침투하는 것을 막는 역할을 한다.
* 서버를 데이터 센터에 두거나 클라우드에 두는 경우도 있다.
* on-premise: 데이터 센터에 서버를 두고 운영하는 것
* 랙을 설치하기 적합한 형태와 크기를 가진 서버와 라우터와 스위치를 설치할 수 있는데, 라우터는 무선 랜 기능이 있는 라우터를 사용한다.
* 각 서버는 *스위치*와 연결하여 서로 통신할 수 있음

# 2. 네트워크의 기본 규칙

## 네트워크의 규칙

### 프로토콜이란?
* 문제 없이 통신하기 위해서는 규칙(약속)을 지켜야한다.
* 통신을 하기위해서 통신하는 방법부터 전체적으로 진행되는 모든 것을 지키는 과정

## OSI 모델과 TCP/IP 모델

### OSI 모델이란?
* A사와 B사끼리 통신하려고 하는데, 케이블부터 커넥터까지 모두가 다 다르게된다면 연결할 수 없을 것이다. 그럼으로 이것들을 공통으로 사용할 수 있는 *표준규격* 을 정하는 것이 OSI모델이다.
* ISO에서 지정
* 7개의 layer가 존재한다. (응,표,세,전,네,데,물)
  * 7layer: 응용 계층(Application Layer)(이메일&파일전송, 웹 사이트 조회등 어플리케이션에 대한 서비스를 제공한다.)
  * 6layer: 표현 계층(Presentation Layer)(문자 코드 압축, 암호화 등의 데이터를 변환한다.)
  * 5layer: 세션 계층(Session Layer)(세션 체결, 통신 방식을 결정한다.)
  * 4layer: 전송 계층(Transfer Layer)(신뢰할 수 있는 통신을 구현한다.)
  * 3layer: 네트워크 계층(Network Layer)(다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정한다.)
  * 2layer: 데이터 링크 계층(Data Link Layer)(네트워크 기기 간의 데이터 전송 및 물리 주소를 결정한다.)
  * 1layer: 물리 계층(Physical Layer)(시스템간의 물리적인 연결과 전기 신호를 변환 및 제어한다.)

![p26](https://user-images.githubusercontent.com/67637935/132121730-e114ef32-d6b6-4346-9d47-572e542f1a1a.jpeg)

* 송신측은 데이터를 보내기 위해서 상위 계층에서 하위 계층으로 데이터 전달
* 수신측은 하위 계층에서 상위 계층으로 데이터 전달
* 각 계층은 프로토콜을 각각 같고 있으며, 독립적임

### TCP/IP 모델이란?
* 4개의 layer가 존재한다.
 * 4layer: 응용계층(OSI-7~5)
 * 3layer: 전송계층(OSI-4)
 * 2layer: 인터넷 계층(OSI-3)
 * 1layer: 네트워크접속계층(OSI-2~1)

![OSI_7_계층과_TCPIP](https://user-images.githubusercontent.com/67637935/132122800-8d76544f-161f-438b-8816-29b7da1a78af.jpeg)

## 캡슐화와 역캡슐화

### 캡슐화와 역캡슐화란?
* 데이터를 보내기 위해서는, 데이터의 앞부분에 전송하는 데 필요한 정보를 붙여서 다음계층으로 보내게 된다. 이 정보들을 '헤더'라고 하고, 이 과정을 캡슐화라고 한다.
* 헤더에는 데이터를 전달받을 상대방에 대한 정보도 포함되어있다.
* 데이터를 받는 쪽에서는 그 받은 데이터의 헤더를 하나씩 제거해야하는데 이 과정을 역캡슐화라 한다.

![데이터_캡슐화](https://user-images.githubusercontent.com/67637935/132122818-65c14fe7-da7a-4b94-b117-3b8e80dc0525.jpeg)

* 데이터 링크 계층에서는 헤더와, 트레일러(데이터를 전송할때 마지막으로 추가하는 정보)를 모두 붙이게된다. 
* 최종적으로 트레일러까지 모두 붙이게된 것이 전기신호가 되어 수신측 데이터 링크 계층으로 전달되게 된다.

* 제거하는 과정은 그 역순으로 이뤄진다.

## VPN
* 가상 통신 터널을 만들어 기업본사나 지사와 같은 거점 간을 연결하여 통신하거나 외부에서 인터넷으로 사내 접속을 하는 과정을 말한다.
* 인터넷VPN(거점 간 접속,원격 접속 연결), IP-VPN(폐쇠망 이용[MPSL])

# (OSI 1계층) 3. 물리 계층: 데이터를 전기신호로 변환하기

## 물리 계층의 역할과 랜 카드의 구조

### 전기신호란?
* 0과 1만으로 이루어진 비트열을 전기 신호로 변환하려면 '물리계층'의 기술이 필요하다.
* 디지털신호(불연속적) and 아날로그신호(연속적)

### 랜카드란?
* 0과 1을 불연속적인 디지털신호로 바꿔주는 기기
* 네트워크를 통해 데이터를 송수신할 수 있도록 '랜 카드'가 메인보드에 포함되어 있는 내장형 랜카드나 별도의 랜 카드를 갖고 있다.
* 물리계층에서 랜카드가 있어서 네트워크에서 데이터를 주고받을 수 있다.

## 케이블의 종류와 구조

### 트위스트 페어 케이블이란?
* 데이터의 전송 매체에 대한 것 크게 두가지: "유선", "무선"
  * 유선: 트위스트 페어 케이블, 광케이블
  * 무선: 라디오파, 마이크로파, 적외선
* Tiwisted pair cable(랜케이블): UTP 케이블, STP 케이블
  * UTP: 네 쌍의 전선으로 실드(Sheild)로 보호되어 있지 않은 케이블
  * Shield: 금속 호일이나 금속의 매듭과 같은 것(노이즈 방지)
  * STP: UTP + Sheild로 노이즈 영향을 매우 적게 받지만, 가격때문에 비싸서 잘 안씀

### 다이렉트 케이블과 크로스 케이블이란?
* 1,2,3,6번 구리선만 사용함
* 다이렉트 케이블: 구리 선 여덟 개를 같은 순서로 커넥터에 연결한 케이블
  * 컴퓨터와 스위치를 연결할 때 사용
* 크로스 케이블: 리 선 여덟 개 중 한쪽 커넥터의 1번과 2번에 연결되는 구리선을 다른 쪽 커넥터의 3번과 6번에 연결한 케이블
  * 컴퓨터간의 데이터 충돌을 피하기 위해 크로스로 사용
  * 컴퓨터 간에 직접 랜 케이블로 연결할 때 사용

## 리비터와 허브의 구조

### 리피터란?
* 물리계층에서 동작
* 전기 신호를 정형(일그러진 전기 신호를 복원)하고 증폭하는 기능을 가진 네트워크 중계 장비
* 상대방과 물리적인 거리가 멀때 사용하는 것

### 허브란?
* 물리계층에서 동작
* 포트(실제로 통신하는 통로)를 여러개 가지고 있고, 포트의 수가 많기에 컴퓨터 여려대와도 통신할 수 있음
* 전기 신호를 정형하고 증폭함
* 단점이 허브는 데이터를 송신할 때 모든 연결된 컴퓨터로 신호를 다보낸다.
* 전기 신호를 모든 포트로 보내서 더미 허브라는 이름으로 불리기도 한다.
* 이 대첵으로 나온 것이 스위치이다.


# 4. (OSI 2계층) 데이터 링크 계층: 랜에서 데이터 전송하기

## 데이터 링크 계층의 역할과 이더넷

### 이더넷이란?
* 랜에서 데이터를 주고 받으려면 "데이터 링크 계층"의 기술이 필요하다
* 데이터 링크 계층은 "네트워크 장비 간에 신호를 주고받는 규칙"을 정하는 계층
* 일반적으로 가장 많이 사용되는 규칙이 "이더넷" 규칙이다.
* 허브의 단점: 연결되어 있는 모든 LAN에 데이터를 전송한다. (허브더미)
* 허브의 단점을 방지하기 위해서 데이터에 "목적지 정보를 추가"해서 보내고 이외의 컴퓨터는 데이터를 받더라도 무시하게 되어있음.
* 여러대가 동시에 데이터를 보내게되면 데이터 충동(collision)이 발생하게 된다.
* 이를 방지하기 위해서 데이터를 보내는 시점을 늦추게 된다. --> *CSMA/CD*
  * CS: 데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지 유무를 판단한다.
  * MA: 케이블에 데이터가 흐르고 있지 않다면 데이터를 보내도 좋다는 규칙
  * CD: 충돌이 발생하고 있는지를 확인한다.
* 효율이 좋지 않기 때문에 허브withCSMA/CD 보다 Switch를 사용한다.

## MAC 주소의 구조

### MAC 주소란?
* 랜 카드는 비트열을 전기신호로 변환해줌(OSI 1계층), 이러한 랜카드에는 MAC 주소라는 고유 번호(물리주소)가 정해져있다.
* MAC 주소는 48bit로 구성되어있다. (파악하기 쉽게 16진수로 구성되어있음)
  * eg) 00-23-AE-D9-7A-9A
    * 앞쪽 24 bit: 랜카드를 만든 제조사 번호
    * 뒤쪽 24 bit: 제조사가 랜카드에서 붙인 일련번호
* 2계층에서는 "이더넷 헤더"와 -트레일러-를 붙여서 캡슐화를 진행한다.
  * 이더넷 헤더(14byte): 
    * 목적지 MAC 주소(6byte) --> 24 bit
    * 출발지 MAC 주소(6byte) --> 24 bit
    * 유형 2(byte): 이더넷으로 전송되는 상위 계층 프로토콜의 종류를 나타냄(IPv4:0800/ARP:0806/RARP:8035/Ethernet:814C/IPv6:86DD).. " 프로토콜 종류를 식별하는 번호 "
  * 트레일러: FCS(Frame Check Sequnece) 데이터 전송 도중에 오류가 발생하는지 확인하는 용도
* 헤더와 트레일러가 추가된 데이터를 "프레임" 이라고한다. 
* 보내는 측의 컴퓨터 1에서 캡슐화가 일어나고 데이터 링크 계층에서 헤더와 트레일러를 추가하여 프레임을 만들고, 물리계층에서 이 프레임 비트열을 전기신호로 변환하여 네트워크를 통해 전송함.
* 허브 기준 해당되는 전기 신호의 목적지 MAC 주소가 자신과 같지 않으면 데이터를 파기함
* 목적지가 같은 곳에서는 역캡슐화가 일어나게 되고, 데이터를 수신하게됨
* 컴퓨터 1,2가 동시에 컴퓨터 3에게 데이터를 전송할 경우 충돌을 방지하기 위해서 CSMA/CD 방식이 사용됨

## 스위치 구조

### MAC 주소 테이블이란?
* 스위치 내부에는 MAC 주소 테이블이라는 것이 있어, 스위치의 포트 번호와 해당 포트에 연결되어 있는 컴퓨터의 MAC 주소가 등록되는 데이터베이스이다.
* 스위치 전원을 켠 상태에서 아직 MAC 주소가 추가된 프레임이라는 데이터가 전송되면 MAC 주소 테이블을 확인하고 출발지 MAC 주소가 등록되어 있지 않으면 MAC 주소를 포트와 함께 등록한다.
* MAC 주소 학습 기능.
* 목적지 MAC 주소에 대한 테이블이 등록되어 있지 않은 경우에는 모든 Port로 데이터를 허브같이 다 보내게 되고, 이를 *Flooding*이라고 한다.
* 출발지와 목적지의 MAC 주소가 테이블에 모두 등록되어 있을 경우 불필요한 데이터를 네트워크에 전송하지 않게되고 이를 *MAC 주소 필터링* 이라고한다.

## 데이터가 케이블에서 충돌하지 않는 구조

### 전이중 통신과 반이중 통신
* 랜으로 직접 송신부 수신부를 각각 연결한다면 전이중 통신방식이 된다.
* 허브같은 경우 더미 허브로 연결되게 되면 데이터들이 충돌되는 반이중 통신방식이기에 스위치(전이중 통신방식)을 이용하는 것이 효율적이며 표준이 되었다.

### 충돌 도메인이란?
* 허브같이 반이중 통신으로 인해 충돌이 일어날 수 있는 범위를 collision domain(충돌 도메인)이라고 한다.
* 허브를 사용하게 되면 허브 전체가 충돌도메인이 되지만, 스위치를 사용하게되면 그 범위는 MAC 주소 테이블이 연결된 그 한 네트워크만 해당되게된다.

### ARP(Address Resolution Protocol)
* 목적지 컴퓨터의 IP 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜.
* 이더넷 프레임을 전송하려면 목적지 컴퓨터의 MAC 주소를 지정해야함.
* 출발지 컴퓨터가 목적지 주소를모르면 MAC 주소를 알아내기 위해 네트워크에 브로드캐스트를 하는데 이것을 ARP Request라고 한다.
* 지정된 IP를 갖고 있는 컴퓨터는 MAC 주소를 응답으로 보낸다. 이것을 ARP Reply 라고 한다.
* 출발지 컴퓨터는 MAC 주소를 얻고 이더넷 프레임을 만들 수 있다.
* 출발지 컴퓨터에서는 MAC 주소를 얻은 후에 MAC 주소와 IP 주소의 매핑 정보를 메모리에 보관한다. 이 것을 ARP Table이라고 한다.
* 이후 데이터 통신은 자신의 컴퓨터에 보관된 ARP 테이블을 참고하여 전송된다.

## 이더넷의 종류와 특징

### 이더넷 규격
* 다양한 이더넷 규격이 존재한다.
* 10BASE-T --> 10(통신속도 Mbps), BASE(BASEBAND라는 전송 방식), T(케이블 종류)

# (OSI 3계층) 네트워크 계층: 목적지에 데이터 전달하기

## 네트워크 계층의 역할

### 네트워크 간의 연결 구조
* 데이터 링크 계층을 통해서라면 물리적으로 연결되어 있는 같은 네트워크에 있는 컴퓨터로는 데이터를 전송할 수 있지만, 인터넷이나 다른 네트워크로는 데이터를 전송할 수 없음
* 수 많은 네트워크가 연결된 환경에서 데이터 링크 계층의 기능만으로는 다른 네트워크로 데이터를 전송하기 힘들다.
* 서로 다른 네트워크끼리의 연결을 가능하게 하는 것이 "라우터"이다.
  * 라우터는 데이터의 목적지가 정해지면 해당 목적지까지 어떤 경로로 가는 것이 좋은지 알려주는 기능
* 네트워크에서도 데이터를 보내려면 목적지 주소가 반드시 있어야함
  * 랜에서는 MAC 주소만으로 해당 목적지를 알 수 있지만, 네트워크들을 식별하기 위해서는 IP주소를 식별해야함
* IP 주소는 어떤 네트워크의 어떤 컴퓨터인지를 구분할 수 있도록 하는 것이다.(다른 네트워크에 있는 목적지 설정가능)
* *라우팅* : 데이터를 어떤 경로로 보낼지 결정하는 것
* 거리에 관계없이 다른 네트워크로 데이터를 보낼 수 있음 --> 라우팅 테이블

### IP란?
* 네트워크 계층에서는 IP(Internet Protocol)이라는 프로토콜이 있음
* 데이터를 다른 네트워크에 있는 목적지까지 보내려면 라우터가 필요한데, 이는 IP가 있어서 가능한 것
* 네트워크 계층에서는 캡슐화를 진행할 때 IP 헤더를 붙임
![스크린샷 2021-09-22 오후 7 35 19](https://user-images.githubusercontent.com/67637935/134328770-ad570a89-0dd3-43d7-8390-8ab8f30dc338.png)
* IP 헤더에는 출발지 IP 주소와 목적지 IP 주소가 포함되어 있다는 것이 핵심!
* IP 프로토콜을 이용하여 캡슐화를 할때는 데이터에 IP 헤더가 추가되는데, 이렇게 만들어진 것을 IP패킷이라고 함

## IP 주소의 구조

### IP 주소란?
* 우편물을 보낼때 적는 주소 같은 느낌
* IP 주소는 ISP(인터넷 서비스 제공자)에게 받을 수 있음
* IPv4는 32bit로 43억개의 IP를 만들 수 있었으나, 부족해서 IPv6가 만들었음
* IP 주소에는 "공인IP"와 "사설IP"가 있음
  * "공인 IP"는 ISP로부터 제공 받을 수 있음
  * "사설 IP"는 인터넷에 직접연결된 라우터 이외에 라우터 다른 컴퓨터로 해당 IP를 뿌려주는 역할
  * 라우터에만 공인 IP를 할당하고, 랜 안에 있는 컴퓨터에는 랜의 네트워크 관리자가 자유롭게 사설 IP주소를 자동으로 할당해줌
* "공인IP"와 "사설IP"모두 32bit를 사용하고 있음(IPv4)
* 
